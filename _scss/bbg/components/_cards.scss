// CARDS

.inner-container {
    // Keep inner-container margins even
    &.gutter-none {
        padding: 0 2rem;

        h2 {
            padding: 0 2rem;
        }
    }

    &.gutter-tiny {
        padding: 0 1.9rem;

        h2 {
            padding: 0 1.9rem;
        }
    }

    &.gutter-small {
        padding: 0 1.5rem;

        h2 {
            padding: 0 1.5rem;
        }
    }

    &.gutter-medium {
        padding: 0 1rem;

        h2 {
            padding: 0 1rem;
        }
    }

    &.gutter-large {
        padding: 0 .5rem;

        h2 {
            padding: 0 .5rem;
        }
    }

    > h2 {
        margin-bottom: 0;
        color: $color-red;
        font-size: 3.4rem;
        line-height: 4.6rem;
        font-weight: 400;

        a {
            text-decoration: none;
            color: $color-red;
        }
    }

    > h3 {
        margin-bottom: 0;
        color: $color-blue-darkest;
        font-size: 2.7rem;
        line-height: 3.7rem;
        font-weight: 400;

        a {
            text-decoration: none;
            color: $color-blue-darkest;
        }
    }
}

@mixin cardLayoutGroup($cols, $totalCols, $height) {
    &-none {
        @include cardLayout($cols, $totalCols, 0rem, $height);
    }
    &-tiny {
        @include cardLayout($cols, $totalCols, .1rem, $height);
    }
    &-small {
        @include cardLayout($cols, $totalCols, .5rem, $height);
    }
    &-medium {
        @include cardLayout($cols, $totalCols, 1rem, $height);
    }
    &-large {
        @include cardLayout($cols, $totalCols, 1.5rem, $height);
    }
}

@mixin cardLayout($cols, $totalCols, $gutter, $height) {
    $factor : 0;
    @if $height == none {
        $factor: -1;
    } @else if $height == tiny {
        $factor: 12;
    } @else if $height == small-minus {
        $factor: 5;
    } @else if $height == small {
        $factor: 4;
    } @else if $height == small-plus {
        $factor: 3;
    } @else if $height == medium {
        $factor: 2;
    } @else if $height == large {
        $factor: 1;
    } @else {
        @error "Unknown layout #{$height}.";
    }

    $cards-grid: (
        columns: $totalCols,
        gutter: $gutter
    );

    @include grid-column($cols, $cards-grid);
    .cards__fixed {
        padding-top: calc((#{$totalCols} / (#{$factor} * #{$cols})  * 0.6 * 100%) + (#{$totalCols} / (#{$factor} * #{$cols}) * 0.6 * #{$gutter}));
    }
}

.cards {
    overflow: hidden;
    position: relative;

    .card-color-white { color: $color-white };
    .card-color-black { color: $color-black };
    .card-color-primary1 { color: $color-blue-darkest };
    .card-color-primary2 { color: $color-blue-darker };
    .card-color-primary3 { color: $color-blue };
    .card-color-primary4 { color: $color-cool-blue };
    .card-color-neutral1 { color: $gray-darker };
    .card-color-neutral2 { color: $gray };
    .card-color-neutral3 { color: $gray-lighter };
    .card-color-neutral4 { color: $gray-lightest };
    .card-color-secondary1 { color: $color-shadow-green };
    .card-color-secondary2 { color: $color-citrine-white };
    .card-color-secondary3 { color: $color-red };

    .card-bg-color-white { background-color: $color-white };
    .card-bg-color-black { background-color: $color-black };
    .card-bg-color-primary1 { background-color: $color-blue-darkest };
    .card-bg-color-primary2 { background-color: $color-blue-darker };
    .card-bg-color-primary3 { background-color: $color-blue };
    .card-bg-color-primary4 { background-color: $color-cool-blue };
    .card-bg-color-neutral1 { background-color: $gray-darker };
    .card-bg-color-neutral2 { background-color: $gray };
    .card-bg-color-neutral3 { background-color: $gray-lighter };
    .card-bg-color-neutral4 { background-color: $gray-lightest };
    .card-bg-color-secondary1 { background-color: $color-shadow-green };
    .card-bg-color-secondary2 { background-color: $color-citrine-white };
    .card-bg-color-secondary3 { background-color: $color-red };

    &.margin-top- {
        &none {
            margin-top: 0rem;
        }
        &tiny {
            margin-top: .1rem;
        }
        &small {
            margin-top: .5rem;
        }
        &medium {
            margin-top: 1rem;
        }
        &large {
            margin-top: 2rem;
        }
    }

    &.margin-bottom- {
        &none {
            margin-bottom: 0rem;
        }
        &tiny {
            margin-bottom: .1rem;
        }
        &small {
            margin-bottom: .5rem;
        }
        &medium {
            margin-bottom: 1rem;
        }
        &large {
            margin-bottom: 2rem;
        }
    }

    .cards__fixed {

        position: relative;

        .cards__wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;

            .cards__backdrop {
                //position: absolute;
                position: relative;
                height: 100%;

                a img {
                    object-fit: cover;
                    width: 100%;
                    height: 100%;
                    margin-bottom: 0px; // Override default
                }

                .cards__backdrop-logo {
                    position: absolute;
                    z-index: 1;
                    bottom:8px;
                    right: 8px;

                    img {
                        margin-bottom: -10px; // Override default
                        width: 36px;
                        height: 36px;
                        opacity: 0.6;
                    }
                }

                .cards__backdrop-shadow {
                    pointer-events: none;
                    height: 100%;
                    width: 100%;
                    bottom: 0;
                    position: absolute;
                    background: linear-gradient(rgba(0,0,0,0), 90%, rgba(0,0,0,.9));
                }
            }

            .cards__header {
                position: absolute;
                width: 100%;
                top: 0;
                padding: 16px;
                color: #fff;

                h2 {
                    font-size: 2rem;
                    margin: 0;
                    padding: 0;

                    a {
                        // color: white;
                        text-decoration: none;
                    }

                    &.align-left {
                        text-align: left;
                    }

                    &.align-center {
                        text-align: center;
                    }

                    &.align-right {
                        text-align: right;
                    }
                }

                .cards__date {
                    margin-bottom: .5em;
                }

                p {
                    margin: 0;
                    padding: 0;
                    font-size: 1em;
                    line-height: 2rem;
                }
            }

            .cards__footer {
                position: absolute;
                bottom: 0;
                width: 90%;
                padding: 16px;

                .cards__tag {
                    background-color: $color-red;
                    display: inline-block;
                    padding: 3px 5px;
                    border: 1px solid white;
                    margin-bottom: .5em;
                    font-size: .8em;
                    color: $color-white;

                    a {
                        color: $color-white;
                        text-decoration: none;
                    }
                }

                h2 {
                    margin: 0 0 -6px 0;
                    padding: 0;
                    font-size: 2.2rem;
                    font-weight: $font-normal;
                    // color: #ffffff;

                    a {
                        // color: #ffffff;
                        text-decoration: none;
                    }
                }

                p {
                    margin: 0;
                    padding: 0;
                    font-size: 1em;
                    line-height: 2rem;
                }
            }
        }
    }

    .cards__flexible {
        .cards__flex-text {
            font-size: 20px;
            font-weight: bold;

        }

        .cards__excerpt {
            p {
                margin: 0;
                padding: 16px;
                font-size: 1.5rem;
                line-height: 2rem;
            }
        }
    }

    // Overrides //

    &.cards-- {
        // Split
        &layout-split {
            .cards__backdrop {
                height: 40%;
            }

            .cards__footer {
                position: relative;
                width: 100%;

                .cards__tag {
                    border: 1px solid #777;
                }

                h2 {
                    line-height: 1em;
                    margin: 8px 0;

                    a {
                        color:#444;
                    }
                }

                p {
                    display: -webkit-box;
                    overflow: hidden;
                    -webkit-line-clamp: 3;
                    -webkit-box-orient: vertical;
                }
            }
        }

        // Includes Brands entries
        &layout-image {
            margin-bottom: 0px;

            .cards__backdrop {

                &.cards__backdrop-image {

                    a {
                        position: relative;
                        display: block;
                        height: 100%;
                        width: 100%;

                        img {
                            display: block;
                            position: absolute;
                            height: 100px;
                            width: 100px;
                            object-fit: contain;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                        }
                    }
                }
            }
        }

        &layout-video_internal {

            .cards__fixed {

                .cards__wrapper {

                    .cards__footer {
                        width: 100%;

                        .cards__tag {
                            border: 1px solid #ffffff;
                        }

                        p {
                            display: -webkit-box;
                            overflow: hidden;
                            -webkit-line-clamp: 3;
                            -webkit-box-orient: vertical;
                        }
                    }
                }
            }
        }
    }

}

.cards--size-1-1-none {
    @include cardLayoutGroup(1, 1, 'none');
}

.cards--size-1-1-small {
    @include cardLayoutGroup(1, 1, 'small');
}

.cards--size-1-1-tiny {
    @include cardLayoutGroup(1, 1, 'small');
}

.cards--size-1-1-normal {
    @include cardLayoutGroup(1, 1, 'large');
}

.cards--size-1-2-normal {
    @include cardLayoutGroup(2, 2, 'large');
}

.cards--size-1-3-small {
    @include cardLayoutGroup(3, 3, 'large');
}

.cards--size-1-4-small {
    @include cardLayoutGroup(4, 4, 'large');
}

.cards--size-1-5-small {
    @include cardLayoutGroup(5, 5, 'large');
}

.cards--size-9-18-normal {
    @include cardLayoutGroup(18, 18, 'large');
}

.cards--size-5-18-normal {
    @include cardLayoutGroup(18, 18, 'large');
}

.cards--size-4-18-normal {
    @include cardLayoutGroup(18, 18, 'large');
}

.cards--size-3-18-small {
    @include cardLayoutGroup(18, 18, 'medium');
}

.cards--size-5-18-small {
    @include cardLayoutGroup(18, 18, 'medium');
}

.cards--size-5-12-normal {
    @include cardLayoutGroup(12, 12, 'large');
}

.cards--size-4-12-normal {
    @include cardLayoutGroup(12, 12, 'large');
}

.cards--size-3-12-normal {
    @include cardLayoutGroup(12, 12, 'large');
}

.cards--size-1-6-small {
    @include cardLayoutGroup(3, 6, 'medium');
}

@include media($medium-screen) {

    .cards {
        &.cards-- {
            &layout-split {
                .cards__footer {
                    h2 {
                        font-size: 1.5rem;
                    }

                    p {
                        font-size: 1.7rem;
                        line-height: 2rem;
                        -webkit-line-clamp: 4;
                    }
                }
            }

            &layout-header {
                .cards__header {
                    h2 {
                        font-size: 1.5rem;
                    }
                }
            }
        }
    }

    .cards--size-1-1-small {
        @include cardLayoutGroup(1, 1, 'small');
    }

    .cards--size-1-1-tiny {
        @include cardLayoutGroup(1, 1, 'tiny');
    }

    .cards--size-1-1-normal {
        @include cardLayoutGroup(1, 1, 'large');
    }

    .cards--size-1-2-normal {
        @include cardLayoutGroup(2, 2, 'large');
    }

    .cards--size-1-3-small {
        @include cardLayoutGroup(3, 3, 'large');
    }

    .cards--size-1-4-small {
        @include cardLayoutGroup(2, 4, 'medium');
    }

    .cards--size-1-5-small {
        @include cardLayoutGroup(5, 5, 'large');
    }

    .cards--size-9-18-normal {
        @include cardLayoutGroup(18, 18, 'large');
    }

    .cards--size-5-18-normal {
        @include cardLayoutGroup(9, 18, 'medium');
    }

    .cards--size-4-18-normal {
        @include cardLayoutGroup(9, 18, 'medium');
    }

    .cards--size-3-18-small {
        @include cardLayoutGroup(9, 18, 'medium');
    }

    .cards--size-5-18-small {
        @include cardLayoutGroup(9, 18, 'medium');
    }

    .cards--size-5-12-normal {
        @include cardLayoutGroup(12, 12, 'large');
    }

    .cards--size-4-12-normal {
        @include cardLayoutGroup(6, 12, 'large');
    }

    .cards--size-3-12-normal {
        @include cardLayoutGroup(6, 12, 'large');
    }

    .cards--size-1-6-small {
        @include cardLayoutGroup(2, 6, 'medium');
    }
}

@include media($medium-large-screen) {

    .cards {
        .cards__wrapper {
            .cards__footer {
                p {
                    font-size: .8em;
                    line-height: 1.2em;
                }
            }
        }

        &.cards-- {
            &layout-split {
                .cards__footer {
                    h2 {
                        font-size: 2rem;
                    }

                    p {
                        font-size: 1em;
                        line-height: 2rem;
                        -webkit-line-clamp: 3;
                    }
                }
            }
        }
    }

    .cards--size-1-1-small {
        @include cardLayoutGroup(1, 1, 'small');
    }

    .cards--size-1-1-tiny {
        @include cardLayoutGroup(1, 1, 'tiny');
    }

    .cards--size-1-1-normal {
        @include cardLayoutGroup(1, 1, 'large');
    }

    .cards--size-1-2-normal {
        @include cardLayoutGroup(1, 2, 'medium');
    }

    .cards--size-1-3-small {
        @include cardLayoutGroup(1, 3, 'small-plus');
    }

    .cards--size-1-4-small {
        @include cardLayoutGroup(1, 4, 'small');
    }

    .cards--size-1-5-small {
        @include cardLayoutGroup(1, 5, 'small-minus');
    }

    .cards--size-9-18-normal {
        @include cardLayoutGroup(9, 18, 'medium');
    }

    .cards--size-5-18-normal {
        @include cardLayoutGroup(5, 18, 'medium');
    }

    .cards--size-4-18-normal {
        @include cardLayoutGroup(4, 18, 'medium');
    }

    .cards--size-3-18-small {
        @include cardLayoutGroup(3, 18, 'small');
    }

    .cards--size-5-18-small {
        @include cardLayoutGroup(5, 18, 'small');
    }

    .cards--size-5-12-normal {
        @include cardLayoutGroup(5, 12, 'medium');
    }

    .cards--size-4-12-normal {
        @include cardLayoutGroup(4, 12, 'medium');
    }

    .cards--size-3-12-normal {
        @include cardLayoutGroup(3, 12, 'medium');
    }

    .cards--size-1-6-small {
        @include cardLayoutGroup(1, 6, 'small');
    }
}